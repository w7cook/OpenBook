<div class="post">
  <div class="hideable">
    <div class="left">
      <img style="width:50px; height:50px;"
           src="@{Photos.getPhoto(_item.author.profile.profilePhoto)}" />
    </div>

    <div class="individual-post">
      <div class="post-author" style="clear:both;">
        <a href="@{Application.news(_item.author.id)}">${_item.author.name}</a>
      </div>
      <div class="post-content tohideopp" style="clear:both;">
        ${_item.contentTeaser().nl2br()}
        <a class='triggershow showfirst'
           href='#' onclick='return false;'> +more </a>
      </div>
      <div class="tohide hide"  style="clear:both; display: none;">
        <div class="post-content">
          ${_item.content.nl2br()}
        </div>
        #{list items:_item.getComments(), as:'comment'}
          #{comment user:_user,currentUser:_currentUser,comment:comment /}
        #{/list}

        <a class='triggerhide' href='#' onclick='return false;'> -less<br/></a>
      </div>

      <div class="individual-post-metadata">
        ${_item.likes.size()}
        #{if _user.isFriendsWith(_currentUser) || _user==_currentUser}
          #{if _item.currentUserLiked()}
            <a href="@{Application.unLike(_item.id,_user.id)}">Unlike</a>
          #{/if}
          #{else}
            <a href="@{Application.addLike(_item.id,_user.id)}">Like</a>
          #{/else}
        #{/if}
        .
        <a id="comment_action_for_post${_item.id}"
           href="#"
           onclick="showDiv('new_comment_for_post${_item.id}')">Comment</a>
        .
        ${_item.updatedAt.format('dd MMM yy')}

        #{if _item.author == _currentUser}
          . <a href="@{Posts.deletePost(_item.id,_user.id)}">delete my post</a>
        #{/if}

        <div id="comment_for_post${_item.id}" style="clear: both;"
             class="comment-textarea">

        </div>
        #{form @Comments.postComment(_item.id, _user.id, commentContent)}
          <div id="new_comment_for_post${_item.id}"
               style="clear:both; display: none;">
            <img style="width:50px; height:50px;"
                 src=@{Photos.getPhoto(_user.profile.profilePhoto)}
                 display="inline"/>
            <input type="text" name="commentContent" id="commentContent"
                   value="new comment...(limit: 100 characters)" maxlength="100"
                   style="color:grey; width: 320px; padding: 2px; height: 20px;
                          display: inline; font-family: serif; resize: none;
                          overflow-y: hidden;" maxlength="100"
                          onclick="this.value='';"/>
            <input type="submit" value="Submit" style="display:none"/>
            <a id="cancel_action_for post${_item.id}" href="#"
               onClick="hideDiv('new_comment_for_post${_item.id}')">Cancel</a>
          </div>
        #{/form}
      </div>
    </div>
  </div>
</div>
