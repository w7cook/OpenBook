#{extends 'two_panel.html' /}

<div style="margin-top: 20px; margin-bottom: 20px;" id="linked_video">
  <h2>${vid.title}</h2>
  #{verbatim} ${vid.getEmbedHtml()} #{/verbatim}
  #{if vid.owner.equals(currentUser)}
    <br />
    <a class="button" href="@{Videos.removeLinkedVideo(vid.id)}">
      Remove Video
    </a>
    <br />
  #{/if}
</div>

#{list items:vid.comments(), as:'comment'}
 
  <div class="forumInner">
    ${currentUser.name}
    #{if comment.author.equals(currentUser)}
      <a class="button" href="@{Videos.removeComment(comment.id)}">
        Remove Comment
      </a>
      <br />
    #{/if}
  	<div class="threadAuthorInfo">
  		<a href="/?id=${comment.author.id}">${comment.author}</a>:<br /> <span
  			class="threadDate">${comment.createdAt.format('M-d-yy, h:mm a')}</span>
  	</div>

  	<div class="threadContent">${comment.content.escape().nl2br()}</div>
  </div>

#{/list}

#{form @Videos.addComment(), enctype:'multipart/form-data'} 
  <div class="forumInner">
  	<div class="threadAuthorInfo">Post reply:</div>

  	<div class="threadContent" style="margin-left: 0px;">
  	    <input type="hidden" name="vid_id" value=${vid.id}>
  			<textarea id="threadReply" name="comment"></textarea>
  			<input id="threadSubmit" type="submit"
  				value="Submit reply" />
  			<div style="clear: both;"></div>
  	</div>
#{/form}

