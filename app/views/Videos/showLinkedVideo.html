#{extends 'two_panel.html' /}

<div style="margin-top: 20px; margin-bottom: 20px;" id="linked_video">
  <h2 style="margin-top: 20px;">${vid.title}</h2> Posted by: ${vid.owner}
  #{verbatim} ${vid.getEmbedHtml(2)} #{/verbatim}
  #{if vid.owner.equals(currentUser)}
    <br />
    <a class="button" href="@{Videos.removeLinkedVideo(vid.id)}">
      Remove Video
    </a>
    <br />
  #{/if}
  
  <div style="border: 1px solid black; padding: 10px; width: 540px">
    ${vid.caption}
  </div>
</div>

#{list items:vid.comments(), as:'comment'}
 
  <div class="forumInner">
    #{if comment.author.equals(currentUser)}
      <a class="button" href="@{Videos.removeComment(comment.id)}">
        Remove Comment
      </a>
      <br />
    #{/if}
  	<div class="threadAuthorInfo">
  		<a href="/?id=${comment.author.id}">${comment.author}</a>:<br /> <span
  			class="threadDate">${comment.createdAt.format('M-d-yy, h:mm a')}</span>
  	</div>
    <div style="padding-top: 10px;">
  	  <span class="threadContent">${comment.content.escape().nl2br()}</span>
  	</div>
  </div>

#{/list}

#{form @Videos.addComment(), enctype:'multipart/form-data'} 
  <div class="forumInner">
  	<div class="threadAuthorInfo">Post reply:</div>

  	<div class="threadContent" style="margin-left: 60px;">
  	    <input type="hidden" name="vid_id" value=${vid.id}>
  			<textarea id="threadReply" name="comment"></textarea>
  			<input id="threadSubmit" type="submit"
  				value="Submit reply" />
  			<div style="clear: both;"></div>
  	</div>
#{/form}

